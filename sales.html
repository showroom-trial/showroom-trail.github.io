<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIA Sales Manager Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="sales.css">
</head>
<body>
 <!-- Mobile Toggle Button -->
    <button class="toggle-btn">
        <i class="fas fa-bars"></i>
    </button>
 <!-- Dashboard Container -->
     <div class="dashboard-container">

    <!-- Sidebar Navigation -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="user-info">
                <div class="user-avatar">A</div>
                <div class="user-details">
                    <i class="fas fa-user"></i>
                </div>
                <div>
                    <div class="user-name">Alex Johnson</div>
                    <div class="user-role">Sales Manager</div>
                </div>
            </div>
        </div>
        <div class="sidebar-menu">
            <a href="#enquiry" class="active" data-section="enquiry-section">
                <div class="nav-icon">ðŸ“‹</div>
                <i class="fas fa-envelope"></i> Enquiry Management
            </a>
            <a href="#sales" data-section="sales-section">
                <div class="nav-icon">ðŸ“Š</div>
                <i class="fas fa-chart-line"></i> Sales Tracking
            </a>
            <a href="#addons" data-section="addons-section">
                <div class="nav-icon">ðŸ”§</div>
                <i class="fas fa-tags"></i> Accessories 
            </a>
            <a href="#team" data-section="team-section">
                <div class="nav-icon">ðŸ“ˆ</div>
                <i class="fas fa-users"></i> Team Performance
            </a>
            <a href="#target-allocation" data-section="target-allocation-section">
                <div class="nav-icon">ðŸŽ¯</div>
                <i class="fas fa-bullseye"></i> Target Allocation
            </a>
        
            <a href="#logout" id="logout-btn" class="nav-link">
                <div class="nav-icon">ðŸ”’</div>
                <span class="nav-text">Logout</span>
            </a>
        </div>
    </div>
    <div class="kia-logo-container">
        <img src="kia-logo.png" alt="KIA Logo" class="kia-logo">
    </div>
    <!-- Main Content Area -->
    <div class="main-content">
        <!-- 1. Enquiry Management Section -->
        <div id="enquiry-section" class="dashboard-section active">
            <div class="section-header">
                <h1 class="section-title">Enquiry Management</h1>
            </div>
            
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title"> Enquiries </h3>
                    </div>
                    <div class="card-value">24</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 12% from last week</span>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Pending Follow-ups</h3>
                    </div>
                    <div class="card-value">18</div>
                    <div class="card-subtitle">
                        <span class="trend-down">â†“ 5% from last week</span>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">E/B</h3>
                    </div>
                    <div class="card-value">32%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘3% from last mounth</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">B/R</h3>
                    </div>
                    <div class="card-value">15%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 8% from last mounth</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Enquiry Source Distribution</h3>
                    <div class="chart-filters">
                        <button class="filter-btn active" data-filter="weekly">Weekly</button>
                        <button class="filter-btn" data-filter="monthly">Monthly</button>
                    </div>
                </div>
                <canvas id="enquirySourceChart"></canvas>
            </div>
            
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Recent Enquiries</h3>
                    <div class="search-filter">
                        <input type="text" id="enquirySearch" placeholder="Search customer...">
                        <select id="statusFilter">
                            <option value="all">type</option>
                            <option value="new">Hot</option>
                            <option value="progress">Warm</option>
                            <option value="closed">Cold</option>
                        </select>
                        <select id="sourceFilter">
                            <option value="all">All Sources</option>
                            <option value="website">Website</option>
                            <option value="walkin">Walk-in</option>
                            <option value="referral">Referral</option>
                            <option value="social">Social Media</option>
                        </select>
                    </div>
                </div>
                <table id="enquiryTable">
                    <thead>
                        <tr>
                            <th>Customer Name</th>
                            <th>Customer ID</th>
                            <th>Contact</th>
                            <th>Enquiry Source</th>
                            <th>Date</th>
                            <th>Assigned To</th>
                            <th>Type</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>John Smith</td>
                            <td>C2022010001</td>
                            <td>+1 234-567-8901</td>
                            <td>Website</td>
                            <td>10 Mar, 2025</td>
                            <td>Mark Wilson</td>
                            <td><span class="Type-badge Type-Hot">Hot</span></td>
                            <td>
                                <button class="status-update-btn" data-id="1">Details</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Emma Johnson</td>
                            <td>C2022010002</td>
                            <td>+1 234-567-8902</td>
                            <td>Walk-in</td>
                            <td>9 Mar, 2025</td>
                            <td>Sarah Davis</td>
                            <td><span class="Type-badge Type-Hot">Hot</span></td>
                            <td>
                                <button class="status-update-btn" data-id="2">Details</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Michael Brown</td>
                            <td>C2022010003</td>
                            <td>+1 234-567-8903</td>
                            <td>Referral</td>
                            <td>9 Mar, 2025</td>
                            <td>Robert Johnson</td>
                            <td><span class="Type-badge Type-Warm">Warm</span></td>
                            <td>
                                <button class="status-update-btn" data-id="3">Details</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Jennifer Davis</td>
                            <td>C2022010004</td>
                            <td>+1 234-567-8904</td>
                            <td>Social Media</td>
                            <td>8 Mar, 2025</td>
                            <td>Mark Wilson</td>
                            <td><span class="Type-badge Type-Cold">Cold</span></td>
                            <td>
                                <button class="status-update-btn" data-id="4">Details</button>
                            </td>
                        </tr>
                        <tr>
                            <td>David Wilson</td>
                            <td>C2022010005</td>
                            <td>+1 234-567-8905</td>
                            <td>Website</td>
                            <td>8 Mar, 2025</td>
                            <td>Sarah Davis</td>
                            <td><span class="Type-badge Type-Warm">Warm</span></td>
                            <td>
                                <button class="status-update-btn" data-id="5">Details</button>
                            </td>
                        </tr>
                        <tr>
                            <td>Lisa Roberts</td>
                            <td>C2022010006</td>
                            <td>+1 234-567-8906</td>
                            <td>Walk-in</td>
                            <td>7 Mar, 2025</td>
                            <td>Robert Johnson</td>
                            <td><span class="Type-badge Type-Cold">Cold</span></td>
                            <td>
                                <button class="status-update-btn" data-id="6">Details</button>
                            </td>
                        </tr>
                        <tr>
                            <td>James Thompson</td>
                            <td>C2022010007</td>
                            <td>+1 234-567-8907</td>
                            <td>Referral</td>
                            <td>7 Mar, 2025</td>
                            <td>Mark Wilson</td>
                            <td><span class="Type-badge Type-Hot"></span>Hot</td>
                            <td>
                                <button class="status-update-btn" data-id="7">Details</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- 2. Sales Tracking Section -->
        <div id="sales-section" class="dashboard-section">
            <div class="section-header">
                <h1 class="section-title">Sales Performance Tracking</h1>
            </div>
            
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Total Sales  (this week)</h3>
                    </div>
                    <div class="card-value">28/60</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 16% from last week</span>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Weekly Target</h3>
                    </div>
                    <div class="card-value">78%</div>
                    <div class="card-subtitle">
                        <span>31/40 vehicles (Target)</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 78%;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Top Performer</h3>
                    </div>
                    <div class="card-value">Mark Wilson</div>
                    <div class="card-subtitle">
                        <span>12 Sales</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">E/B</h3>
                    </div>
                    <div class="card-value">52%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘17% from last mounth</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">B/R</h3>
                    </div>
                    <div class="card-value">32%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘8% from last mounth</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Sales Performance</h3>
                    <div class="search-filter">
                        <input type="text" placeholder="Search by model">
                        <select>
                            <option>All Models</option>
                            <option>Sportage</option>
                            <option>Sorento</option>
                            <option>Telluride</option>
                            <option>K5</option>
                            <option>EV6</option>
                        </select>
                    </div>
                </div>
                <canvas id="dailySalesChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Monthly Sales Trends</h3>
                    <div class="chart-filters">
                         <div class="search-filter">
                        <input type="text" placeholder="Search by model">
                        <select>
                            <option>All Models</option>
                            <option>Sportage</option>
                            <option>Sorento</option>
                            <option>Telluride</option>
                            <option>K5</option>
                            <option>EV6</option>
                        </select>
                    </div>
                    </div>
                </div>
                <canvas id="salesTrendChart"></canvas>
            </div>
            
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Recent Sales</h3>
                    <div class="search-filter">
                        <input type="text" placeholder="Search by model or customer...">
                        <select>
                            <option>All Models</option>
                            <option>Sportage</option>
                            <option>Sorento</option>
                            <option>Telluride</option>
                            <option>K5</option>
                            <option>EV6</option>
                        </select>
                    </div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Customer</th>
                            <th>Customer ID</th>
                            <th>Model</th>
                            <th>Sale Date</th>
                            <th>Sales Executive</th>
                            <th>Add-ons</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Jennifer Davis</td> 
                            <td>C2022010001</td>
                            <td>KIA Sportage</td>
                            <td>10 Mar, 2025</td>
                            <td>Mark Wilson</td>
                            <td>Navigation, Premium Audio</td>
                        </tr>
                        <tr>
                            <td>Christopher Lee</td>
                            <td>C2022010002</td>
                            <td>KIA Sorento</td>
                            <td>10 Mar, 2025</td>
                            <td>Sarah Davis</td>
                            <td>Leather Package, Winter Kit</td>
                        </tr>
                        <tr>
                            <td>Jessica Miller</td>
                            <td>C2022010003</td>
                            <td>KIA EV6</td>
                            <td>10 Mar, 2025</td>
                            <td>Robert Johnson</td>
                            <td>Home Charger, Tech Package</td>
                        </tr>
                        <tr>
                            <td>Michael Harris</td>
                            <td>C2022010004</td>
                            <td>KIA K5</td>
                            <td>9 Mar, 2025</td>
                            <td>Mark Wilson</td>
                            <td>Premium Audio</td>
                        </tr>
                        <tr>
                            <td>Emily Wilson</td>
                            <td>C2022010005</td>
                            <td>KIA Telluride</td>
                            <td>9 Mar, 2025</td>
                            <td>Sarah Davis</td>
                            <td>Towing Package, Premium Interior</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Sales Performance Section -->
            <section id="sales" class="dashboard-section">
                <div class="section-header">
                    <h1>Sales Performance</h1>
                    <p>Q1 2025</p>
                </div> 

                <div class="dashboard-grid">
                    <div class="card metric-card">
                        <h3>Total Vehicles Sold</h3>
                        <div class="metric-value">356</div>
                        <div class="trend trend-up">
                            <span>â†‘ 8.2% YoY</span>
                        </div>
                    </div>
                    <div class="card metric-card">
                        <h3>Avg. Sale Price</h3>
                        <div class="metric-value">&#8377;38,750</div>
                        <div class="trend trend-up">
                            <span>â†‘ 3.1% YoY</span>
                        </div>
                    </div>
                    <div class="card metric-card">
                        <h3>Profit Margin</h3>
                        <div class="metric-value">12.8%</div>
                        <div class="trend trend-down">
                            <span>â†“ 0.5% YoY</span>
                        </div>
                    </div>
                </div>

                <div class="card chart-card">
                    <div class="chart-card-header">
                        <h3>Sales by Vehicle Type</h3>
                    </div>
                    <div class="chart-container">
                        <div class="chart-controls">
                            <button class="chart-control-btn">Booking</button>
                            <button class="chart-control-btn">Enquiry</button>
                            <button class="chart-control-btn">Retail</button>
                        </div>
                        <canvas id="vehicleTypeChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <h3>Sales Executive Performance</h3>
                    <div class="table-container">
                        <table>
                <tr>
                    <th rowspan="2">KEC'S</th>
                    <th colspan="3" class="main-header">ENQUIRY</th>
                    <th rowspan="2">TD</th>
                    <th rowspan="2">TD%</th>
                    <th colspan="3" class="main-header">BOOKING</th>
                    <th colspan="3" class="main-header">RETAILS</th>
                    <th rowspan="2">E-B</th>
                    <th rowspan="2">B-R</th>
                </tr>
                <tr>
                    <th class="column-header">TGT</th>
                    <th class="column-header">ACH</th>
                    <th class="column-header">%</th>
                    <th class="column-header">TGT</th>
                    <th class="column-header">ACH</th>
                    <th class="column-header">%</th>
                    <th class="column-header">TGT</th>
                    <th class="column-header">ACH</th>
                    <th class="column-header">%</th>
                </tr>
                <tr>
                    <td>David Kim</td>
                    <td>30</td>
                    <td>38</td>
                    <td class="green">126.7%</td>
                    <td>28</td>
                    <td class="green">93%</td>
                    <td>20</td>
                    <td>22</td>
                    <td class="green">110%</td>
                    <td>15</td>
                    <td>17</td>
                    <td class="green">113%</td>
                    <td>73%</td>
                    <td>77%</td>
                </tr>
                <tr>
                    <td>Lisa Carter</td>
                    <td>30</td>
                    <td>32</td>
                    <td class="green">106.7%</td>
                    <td>25</td>
                    <td class="green">78%</td>
                    <td>18</td>
                    <td>15</td>
                    <td class="yellow">83%</td>
                    <td>12</td>
                    <td>10</td>
                    <td class="yellow">83%</td>
                    <td>60%</td>
                    <td>67%</td>
                </tr>
                <tr>
                    <td>Marcus Johnson</td>
                    <td>25</td>
                    <td>28</td>
                    <td class="green">112.0%</td>
                    <td>20</td>
                    <td class="green">71%</td>
                    <td>15</td>
                    <td>12</td>
                    <td class="yellow">80%</td>
                    <td>10</td>
                    <td>8</td>
                    <td class="yellow">80%</td>
                    <td>60%</td>
                    <td>67%</td>
                </tr>
                <tr>
                    <td>Jennifer Thompson</td>
                    <td>25</td>
                    <td>22</td>
                    <td class="yellow">88.0%</td>
                    <td>18</td>
                    <td class="yellow">82%</td>
                    <td>12</td>
                    <td>8</td>
                    <td class="red">67%</td>
                    <td>8</td>
                    <td>5</td>
                    <td class="red">63%</td>
                    <td>48%</td>
                    <td>63%</td>
                </tr>
                <tr>
                    <td>Carlos Rodriguez</td>
                    <td>20</td>
                    <td>19</td>
                    <td class="yellow">95.0%</td>
                    <td>15</td>
                    <td class="yellow">79%</td>
                    <td>10</td>
                    <td>7</td>
                    <td class="red">70%</td>
                    <td>7</td>
                    <td>4</td>
                    <td class="red">57%</td>
                    <td>47%</td>
                    <td>57%</td>
                </tr>
            </table>
                    </div>
                </div>
            </section>
            <!-- Service Performance Section -->
            <section id="service" class="dashboard-section">
                <div class="section-header">
                    <h1>Service Performance</h1>
                    <p>Q1 2025</p>
                </div>

                <div class="dashboard-grid">
                    <div class="card metric-card">
                        <h3>Total Service Orders</h3>
                        <div class="metric-value">483</div>
                        <div class="trend trend-up">
                            <span>â†‘ 4.8% YoY</span>
                        </div>
                    </div>
                    <div class="card metric-card">
                        <h3>Avg. Service Value</h3>
                        <div class="metric-value">&#8377;342</div>
                        <div class="trend trend-up">
                            <span>â†‘ 2.7% YoY</span>
                        </div>
                    </div>
                    <div class="card metric-card">
                        <h3>Customer Satisfaction</h3>
                        <div class="metric-value">4.8/5</div>
                        <div class="trend trend-up">
                            <span>â†‘ 0.2 vs Last Quarter</span>
                        </div>
                    </div>
                </div>

                <div class="card chart-card">
                    <div class="chart-card-header">
                        <h3>Service Types Distribution</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="serviceTypeChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <h3>Technician Performance</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Orders Completed</th>
                                    <th>Avg. Completion Time</th>
                                    <th>Labor Hours</th>
                                    <th>Customer Rating</th>
                                    <th>Efficiency Score</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mike Reynolds</td>
                                    <td>87</td>
                                    <td>2.3 hrs</td>
                                    <td>212 hrs</td>
                                    <td>4.9/5</td>
                                    <td>96%</td>
                                </tr>
                                <tr>
                                    <td>Samantha Lee</td>
                                    <td>79</td>
                                    <td>2.5 hrs</td>
                                    <td>198 hrs</td>
                                    <td>4.8/5</td>
                                    <td>93%</td>
                                </tr>
                                <tr>
                                    <td>Robert Jackson</td>
                                    <td>84</td>
                                    <td>2.4 hrs</td>
                                    <td>206 hrs</td>
                                    <td>4.7/5</td>
                                    <td>91%</td>
                                </tr>
                                <tr>
                                    <td>Angela Martinez</td>
                                    <td>78</td>
                                    <td>2.6 hrs</td>
                                    <td>190 hrs</td>
                                    <td>4.8/5</td>
                                    <td>89%</td>
                                </tr>
                                <tr>
                                    <td>Kevin Chen</td>
                                    <td>82</td>
                                    <td>2.4 hrs</td>
                                    <td>201 hrs</td>
                                    <td>4.7/5</td>
                                    <td>90%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>
        <!-- 3. Add-ons & Cross-selling Section -->
        <div id="addons-section" class="dashboard-section">
            <div class="section-header">
                <h1 class="section-title">Accessories</h1>
            </div>
            
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Accessory Revenue</h3>
                    </div>
                    <div class="card-value">&#8377;68.3K</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 8% from last week</span>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">E/B</h3>
                    </div>
                    <div class="card-value">44%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 5% from last month</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">B/R</h3>
                    </div>
                    <div class="card-value">27%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 8% from last month</span>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Top Accessory</h3>
                    </div>
                    <div class="card-value">Premium Audio</div>
                    <div class="card-subtitle">
                        <span>Sold with 68% of vehicles</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Accessory Distribution by Type</h3>
                </div>
                <canvas id="addonDistributionChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Accessory Attachment Rate by Model</h3>
                </div>
                <canvas id="addonByModelChart"></canvas>
            </div>
            
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Top Performing Accessories</h3>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Accessory Name</th>
                            <th>Category</th>
                            <th>Revenue</th>
                            <th>Avg. Price</th>
                            <th>Trend</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Premium Audio System</td>
                            <td>Entertainment</td>
                            <td>&#8377;21,400</td>
                            <td>&#8377;1,200</td>
                            <td><span class="trend-up">â†‘ 4%</span></td>
                        </tr>
                        <tr>
                            <td>Navigation Package</td>
                            <td>Technology</td>
                            <td>&#8377;18,600</td>
                            <td>&#8377;950</td>
                            <td><span class="trend-up">â†‘ 2%</span></td>
                        </tr>
                        <tr>
                            <td>Winter Kit</td>
                            <td>Accessories</td>
                            <td>&#8377;10,800</td>
                            <td>&#8377;600</td>
                            <td><span class="trend-up">â†‘ 8%</span></td>
                        </tr>
                        <tr>
                            <td>Leather Package</td>
                            <td>Interior</td>
                            <td>&#8377;19,200</td>
                            <td>&#8377;1,600</td>
                            <td><span class="trend-down">â†“ 2%</span></td>
                        </tr>
                        <tr>
                            <td>Towing Package</td>
                            <td>Functionality</td>
                            <td>&#8377;11,400</td>
                            <td>&#8377;950</td>
                            <td><span class="trend-up">â†‘ 5%</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- 4. Team Performance Section -->
        <div id="team-section" class="dashboard-section">
            <div class="section-header">
                <h1 class="section-title">Team Performance</h1>
            </div>
            
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Total Team Sales</h3>
                    </div>
                    <div class="card-value">128/200</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 12% from last month</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Monthly Target</h3>
                    </div>
                    <div class="card-value">64%</div>
                    <div class="card-subtitle">
                        <span>128/200 vehicles (Target)</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 64%;"></div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">E/B</h3>
                    </div>
                    <div class="card-value">38%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 13% from last month</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">B/R</h3>
                    </div>
                    <div class="card-value">22%</div>
                    <div class="card-subtitle">
                        <span class="trend-up">â†‘ 3% from last month</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Teams Sales Performance</h3>
                </div>
                <canvas id="teamPerformanceChart"></canvas>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <h3 class="chart-title">Team Conversion Funnel</h3>
                </div>
                <canvas id="conversionFunnelChart"></canvas>
            </div>
            <div class="header">
                <h1>Team Performance</h1>
            </div>
            
            <div class="controls-container">
                <div class="dropdown-container">
                    <button class="dropdown-btn" id="dropdownBtn">Teams</button>
                    <div class="dropdown-content" id="dropdownContent">
                        <a onclick="selectTeam('Team 1')">Team 1</a>
                        <a onclick="selectTeam('Team 2')">Team 2</a>
                        <a onclick="clearTeam()">Teams</a>
                    </div>
                </div>
                <button class="export-btn" id="exportBtn">Export to Excel</button>
            </div>
            
            <div id="teamMembersTableContainer">
                <div class="no-team-message">
                    Please select a team from the dropdown to view performance data
                </div>
            </div>
            <div class="table-container">
                <div class="table-header">
                    <h3 class="table-title">Sales Team Ranking</h3>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Representative</th>
                            <th>Representative ID</th>
                            <th>Sales </th>
                            <th>Target Progress</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Mark Wilson</td>
                            <td>EKA30801</td>
                            <td>16</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 80%;"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Sarah Davis</td>
                            <td>EKA30802</td>
                            <td>14</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 70%;"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Robert Johnson</td>
                            <td>EKA30803</td>
                            <td>12</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%;"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Jennifer Adams</td>
                            <td>EKA30804</td>
                            <td>10</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 50%;"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>Michael Carter</td>
                            <td>EKA30805</td>
                            <td>8</td>
                            <td>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 40%;"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 6. Target Allocation -->
        <div id="target-allocation-section" class="dashboard-section">
            <div class="section-header">
                <h1 class="section-title">Targets</h1>
            </div>
        
            <div class="cards-container">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Total Target</h3>
                    </div>
                    <div class="card-value" id="total-target">500</div>
                    <div class="card-subtitle">Overall Targets</div>
                </div>
        
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Sales Target</h3>
                    </div>
                    <div class="card-value" id="sales-target">25</div>
                    <div class="card-subtitle">this month</div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Accessories Sales Target(â‚¹)</h3>
                    </div>
                    <div class="card-value" id="accessories-target">3,00,000.00</div>
                    <div class="card-subtitle">this month</div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Enquiries Target</h3>
                    </div>
                    <div class="card-value" id="enquiries-target">150</div>
                    <div class="card-subtitle">this month</div>
                </div>
            </div>
            
            <!-- Set Targets Section -->
            <div class="section-header">
                <h1>Assign Targets</h1>
            </div>
            
            <div class="controls">
                <div class="filter-group">
                    <select id="targetLocationSelect" class="filter-dropdown">
                        <option value="all">Teams</option>
                        <option value="shivamogga">Team 1</option>
                        <option value="chitradurga">Team 2</option>
                        <option value="chikmangaluru">Team 3</option>
                        <option value="davanagere">Team 4</option>
                    </select>
                </div>
        
                <div class="filter-group">
                    <select id="monthSelect" class="filter-dropdown">
                        <option value="january">January</option>
                        <option value="february">February</option>
                        <option value="march">March</option>
                        <option value="april">April</option>
                        <option value="may">May</option>
                        <option value="june">June</option>
                        <option value="july">July</option>
                        <option value="august">August</option>
                        <option value="september">September</option>
                        <option value="october">October</option>
                        <option value="november">November</option>
                        <option value="december">December</option>
                    </select>
                </div>
            </div>

            <div class="card">
                <h3>Target Configuration</h3>
                <div class="target-form-container">
                    <form id="targetForm">
                       <!-- Add this above your form in the Target Configuration card -->
                        <button type="button" id="loadCurrentBtn" class="secondary-btn" style="margin-bottom: 16px;">Load Current Targets</button>

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="salesTarget">Sales Target (units)</label>
                                <div style="display: flex; gap: 8px;">
                                    <input type="number" id="salesTarget" class="form-input" min="0">
                                    <button type="button" class="suggest-btn" onclick="applySuggestion('salesTarget', 5)">Suggest</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="accessoriesTarget">Accessories Sales Target (â‚¹)</label>
                                <div style="display: flex; gap: 8px;">
                                    <input type="number" id="accessoriesTarget" class="form-input" min="0">
                                    <button type="button" class="suggest-btn" onclick="applySuggestion('accessoriesTarget', 30000)">Suggest</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="enquiriesTarget">Enquiries Target</label>
                                <div style="display: flex; gap: 8px;">
                                    <input type="number" id="enquiriesTarget" class="form-input" min="0">
                                    <button type="button" class="suggest-btn" onclick="applySuggestion('enquiriesTarget', 35)">Suggest</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="primary-btn">Assign Targets</button>
                            <button type="button" class="primary-btn">
                                <div class="export-icon">ðŸ“Š</div>
                                <span class="export-text">Import CSV</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Target History Section -->
                <div class="table-container">
                    <h2>Target History</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th>Team</th>
                                <th>Assigned Target</th>
                                <th>Achieved</th>
                                <th>Completion Rate</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>January</td>
                                <td>Team A</td>
                                <td>90</td>
                                <td>85</td>
                                <td>94%</td>
                            </tr>
                            <tr>
                                <td>January</td>
                                <td>Team B</td>
                                <td>100</td>
                                <td>80</td>
                                <td>80%</td>
                            </tr>
                            <tr>
                                <td>February</td>
                                <td>Team A</td>
                                <td>110</td>
                                <td>95</td>
                                <td>86%</td>
                            </tr>
                            <tr>
                                <td>February</td>
                                <td>Team B</td>
                                <td>115</td>
                                <td>100</td>
                                <td>87%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // DOM Elements
            const toggleBtn = document.querySelector('.toggle-btn');
            const sidebar = document.querySelector('.sidebar');
            const mainContent = document.querySelector('.main-content');
            const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
            const dashboardSections = document.querySelectorAll('.dashboard-section');
    
            // Toggle sidebar on mobile
            toggleBtn.addEventListener('click', () => {
                sidebar.classList.toggle('active'); 
                mainContent.classList.toggle('sidebar-active'); 
            });
    
            // Navigation & Auto Scroll to Top
            sidebarLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Remove active class from all links
                    sidebarLinks.forEach(link => link.classList.remove('active'));
                    
                    // Add active class to clicked link
                    link.classList.add('active');
                    
                    // Get the section to show
                    const sectionId = link.getAttribute('data-section');
                    const targetSection = document.getElementById(sectionId);
    
                    if (targetSection) {
                        // Hide all sections
                        dashboardSections.forEach(section => section.classList.remove('active'));
    
                        // Show selected section
                        targetSection.classList.add('active');
    
                        // âœ… ðŸ”¥ Auto Scroll Fix Using scrollIntoView
                        setTimeout(() => {
                            document.querySelector(".main-content").scrollIntoView({
                                behavior: "smooth",
                                block: "start"
                            });
                        }, 50); // Small delay ensures the section is fully loaded
    
                        // Close sidebar on mobile after clicking
                        sidebar.classList.remove('active');
                    }
                });
            });
        });

        // Chart Initialization
        window.addEventListener('load', () => {
            // Enquiry Source Distribution Chart
            const enquirySourceCtx = document.getElementById('enquirySourceChart').getContext('2d');
            const enquirySourceChart = new Chart(enquirySourceCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Website', 'Walk-in', 'Referral', 'Social Media', 'Phone'],
                    datasets: [{
                        data: [38, 24, 18, 14, 6],
                        backgroundColor: [
                            '#E63946', // Red
                            '#F4A261', // Orange
                            '#E9C46A', // Yellow
                            '#2A9D8F', // Teal
                            '#264653' 
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right'
                        }
                    }
                }
            });
            
            // Daily Sales Performance Chart
            const dailySalesCtx = document.getElementById('dailySalesChart').getContext('2d');
            const dailySalesChart = new Chart(dailySalesCtx, {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Sales',
                        data: [5, 7, 6, 8, 9, 5, 7],
                        backgroundColor: '#1D3557'
                    },
                    {
                        label: 'Target',
                        data: [6, 6, 6, 6, 6, 5, 5],
                        type: 'bar',
                        borderColor: '#F4A261',
                        borderWidth: 2,
                        fill: false,
                        pointBackgroundColor: '#F4A261'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Sales Trend Chart
            const salesTrendCtx = document.getElementById('salesTrendChart').getContext('2d');
            const salesTrendChart = new Chart(salesTrendCtx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{
                        label: 'This Month',
                        data: [28, 32, 36, 32],
                        borderColor: '#A8DADC',
                        backgroundColor: 'rgba(168, 218, 220, 0.2)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: 'Last Month',
                        data: [24, 26, 30, 28],
                        borderColor: '#457B9D',
                        backgroundColor: 'rgba(69, 123, 157, 0.2)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Add-on Distribution Chart
            const addonDistributionCtx = document.getElementById('addonDistributionChart').getContext('2d');
            const addonDistributionChart = new Chart(addonDistributionCtx, {
                type: 'bar',
                data: {
                    labels: ['Entertainment', 'Technology', 'Accessories', 'Interior', 'Functionality'],
                    datasets: [{
                        data: [32, 25, 18, 15, 10],
                        backgroundColor: [
                        '#F94144', // Bright Red
                        '#F3722C', // Bright Orange
                        '#F9C74F', // Yellow
                        '#90BE6D', // Green
                        '#43AA8B'
                        ]
                    }]
                },
                options: {
                    responsive: true
                }
            });
            
            // Add-on by Model Chart
            const addonByModelCtx = document.getElementById('addonByModelChart').getContext('2d');
            const addonByModelChart = new Chart(addonByModelCtx, {
                type: 'bar',
                data: {
                    labels: ['Sportage', 'Sorento', 'Telluride', 'K5', 'EV6'],
                    datasets: [{
                        label: 'Attachment Rate (%)',
                        data: [86, 78, 92, 68, 88],
                        backgroundColor: '#1D3557'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
            
            // Team Performance Chart
            const teamPerformanceCtx = document.getElementById('teamPerformanceChart').getContext('2d');
            const teamPerformanceChart = new Chart(teamPerformanceCtx, {
                type: 'bar',
                data: {
                    labels: ['Team 1.', 'Team 2.', 'Team 3.', 'Team 4.', 'Team 5.'],
                    datasets: [{
                        label: 'Target',
                        data: [20, 18, 16, 14, 12],
                        backgroundColor: '#457B9D'
                    },
                    {
                        label: 'Sales',
                        data: [16, 14, 12, 10, 8],
                        backgroundColor: '#e76f51'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Sales'
                            }
                        },
                        y1: {
                            beginAtZero: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Conversion Rate (%)'
                            },
                            grid: {
                                drawOnChartArea: false
                            },
                            max: 50
                        }
                    }
                }
            });
            
            // Conversion Funnel Chart
            const conversionFunnelCtx = document.getElementById('conversionFunnelChart').getContext('2d');
            const conversionFunnelChart = new Chart(conversionFunnelCtx, {
                type: 'bar',
                data: {
                    labels: ['Enquiries', 'Test Drives', 'Bookings', 'Sales'],
                    datasets: [{
                        label: 'Conversion Funnel',
                        data: [400, 240, 160, 128],
                        backgroundColor: [
                        '#2A9D8F', // Teal
                        '#E9C46A', // Yellow
                        '#F4A261', // Orange
                        '#E63946'  
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            //Update Target Progress & Export
            document.addEventListener("DOMContentLoaded", function () {
                const inputs = document.querySelectorAll(".target-input");
                const exportBtn = document.querySelector(".export-btn");
            
                // Update Progress Bars Dynamically
                inputs.forEach(input => {
                    input.addEventListener("input", function () {
                        const team = this.dataset.team;
                        const allocated = parseInt(this.value) || 0;
                        const achieved = parseInt(document.getElementById(`achieved-${team}`).innerText) || 0;
                        const progress = (achieved / allocated) * 100;
            
                        document.getElementById(`progress-${team}`).style.width = progress + "%";
            
                        let totalTarget = 0;
                        inputs.forEach(i => totalTarget += parseInt(i.value) || 0);
                        document.getElementById("total-target").innerText = totalTarget;
                    });
                });
                document.getElementById("assign-target-btn").addEventListener("click", function() {
                    const team = document.getElementById("team-select").value;
                    const targetValue = document.getElementById("target-input").value;
            
                    if (targetValue && targetValue > 0) {
                        alert(`Target of ${targetValue} assigned to ${team}`);
                        // Here, you can update the table dynamically or send data to a backend.
                    } else {
                        alert("Please enter a valid target value.");
                    }
                });
            
                // Export Table as CSV
                exportBtn.addEventListener("click", function () {
                    let csvContent = "data:text/csv;charset=utf-8,";
                    csvContent += "Team Lead,Allocated Target,Achieved Sales,Rank\n";
            
                    document.querySelectorAll("tbody tr").forEach(row => {
                        let rowData = [];
                        row.querySelectorAll("td").forEach(cell => rowData.push(cell.innerText || cell.querySelector("input").value));
                        csvContent += rowData.join(",") + "\n";
                    });
            
                    const encodedUri = encodeURI(csvContent);
                    const link = document.createElement("a");
                    link.setAttribute("href", encodedUri);
                    link.setAttribute("download", "target_allocation_report.csv");
                    document.body.appendChild(link);
                    link.click();
                });
            });
                    
            // Location Performance Chart
            const locationPerformanceCtx = document.getElementById('locationPerformanceChart').getContext('2d');
            const locationPerformanceChart = new Chart(locationPerformanceCtx, {
                type: 'bar',
                data: {
                    labels: ['Shivamogga', 'Davanagere', 'Chitradurga', 'Chikkamagaluru'],
                    datasets: [{
                        label: 'Monthly Sales',
                        data: [48, 42, 38, 34, 32],
                        backgroundColor: '#333333'
                    },
                    {
                        label: 'Conversion Rate (%)',
                        data: [36, 38, 31, 29, 28],
                        type: 'bar',
                        borderColor: '#999999',
                        backgroundColor: '#bbbbbb',
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Monthly Sales'
                            }
                        },
                        y1: {
                            beginAtZero: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Conversion Rate (%)'
                            },
                            grid: {
                                drawOnChartArea: false
                            },
                            max: 50
                        }
                    }
                }
            });
            
            // Model by Location Chart
            const modelByLocationCtx = document.getElementById('modelByLocationChart').getContext('2d');
            const modelByLocationChart = new Chart(modelByLocationCtx, {
                type: 'bar',
                data: {
                    labels: ['Sportage', 'Sorento', 'Telluride', 'K5', 'EV6'],
                    datasets: [
                        {
                            label: 'Shivamogga',
                            data: [15, 8, 9, 10, 6],
                            borderColor: '#333333',
                            backgroundColor: 'rgba(51, 85, 119, 0.2)'
                        },
                        {
                            label: 'Davanagere',
                            data: [9, 11, 5, 12, 5],
                            borderColor: '#999999',
                            backgroundColor: 'rgba(85, 51, 119, 0.2)'
                        },
                        {
                            label: 'Chitradurga',
                            data: [7, 9, 12, 6, 4],
                            borderColor: '#bbbbbb',
                            backgroundColor: 'rgba(119, 85, 51, 0.2)'
                        },
                        {
                            label: 'Chikkamagaluru',
                            data: [5, 11, 14, 7, 6],
                            borderColor: '#65357',
                            backgroundColor: 'rgba(234, 36, 51, 0.2)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Sales Forecast Chart
            const salesForecastCtx = document.getElementById('salesForecastChart').getContext('2d');
            const salesForecastChart = new Chart(salesForecastCtx, {
                type: 'line',
                data: {
                    labels: ['March', 'April', 'May', 'June'],
                    datasets: [{
                        label: 'Projected Sales',
                        data: [194, 214, 236, 258],
                        borderColor: '#003366',
                        backgroundColor: 'rgba(0, 51, 102, 0.2)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.3
                    },
                    {
                        label: 'Actual Sales',
                        data: [194, null, null, null],
                        borderColor: '#777777',
                        backgroundColor: 'rgba(119, 119, 119, 0.2)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        fill: false,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Total Sales'
                            }
                        }
                    }
                }
            });
            
            // Model Trend Chart
            const modelTrendCtx = document.getElementById('modelTrendChart').getContext('2d');
            const modelTrendChart = new Chart(modelTrendCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'Sportage',
                            data: [42, 46, 48, 52, 56, 60],
                            borderColor: '#333333',
                            backgroundColor: 'transparent',
                            tension: 0.3
                        },
                        {
                            label: 'EV6',
                            data: [18, 22, 28, 35, 43, 53],
                            borderColor: '#555555',
                            backgroundColor: 'transparent',
                            tension: 0.3
                        },
                        {
                            label: 'Telluride',
                            data: [36, 38, 41, 44, 47, 50],
                            borderColor: '#777777',
                            backgroundColor: 'transparent',
                            tension: 0.3
                        },
                        {
                            label: 'K5',
                            data: [32, 33, 35, 36, 37, 38],
                            borderColor: '#999999',
                            backgroundColor: 'transparent',
                            tension: 0.3
                        },
                        {
                            label: 'Sorento',
                            data: [28, 30, 31, 32, 33, 34],
                            borderColor: '#bbbbbb',
                            backgroundColor: 'transparent',
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Units Sold'
                            }
                        }
                    }
                }
            });
        });

        document.addEventListener("DOMContentLoaded", function () {
            const filterButtons = document.querySelectorAll(".filter-btn");
            const tables = {
                team: document.getElementById("team-allocation"),
                model: document.getElementById("model-allocation"),
                location: document.getElementById("location-allocation"),
            };

            filterButtons.forEach(button => {
                button.addEventListener("click", function () {
                    // Remove 'active' class from all buttons
                    filterButtons.forEach(btn => btn.classList.remove("active"));

                    // Add 'active' class to the clicked button
                    this.classList.add("active");

                    // Get the filter type from the button's data attribute
                    const filterType = this.getAttribute("data-filter");

                    // Hide all tables
                    Object.values(tables).forEach(table => table.style.display = "none");

                    // Show the table corresponding to the selected filter
                    if (tables[filterType]) {
                        tables[filterType].style.display = "block";
                    }
                });
            });
        });
        
        // Initialize with the first section active
        document.querySelector('.sidebar-menu a').classList.add('active');
        document.getElementById('enquiry-section').classList.add('active');
        
        // Responsive table functionality
        const tables = document.querySelectorAll('table');
        tables.forEach(table => {
            if (window.innerWidth < 768) {
                table.classList.add('responsive-table');
            }
        });
        
        window.addEventListener('resize', () => {
            tables.forEach(table => {
                if (window.innerWidth < 768) {
                    table.classList.add('responsive-table');
                } else {
                    table.classList.remove('responsive-table');
                }
            });
        });
        
        // Search functionality for tables
        const searchInputs = document.querySelectorAll('.search-input');
        searchInputs.forEach(input => {
            input.addEventListener('keyup', function() {
                const searchValue = this.value.toLowerCase();
                const tableId = this.getAttribute('data-table');
                const table = document.getElementById(tableId);
                const rows = table.querySelectorAll('tbody tr');
                
                rows.forEach(row => {
                    let found = false;
                    const cells = row.querySelectorAll('td');
                    cells.forEach(cell => {
                        if (cell.textContent.toLowerCase().includes(searchValue)) {
                            found = true;
                        }
                    });
                    
                    if (found) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });
        
        // Filter functionality
        const filterSelects = document.querySelectorAll('.filter-select');
        filterSelects.forEach(select => {
            select.addEventListener('change', function() {
                const filterValue = this.value;
                const filterType = this.getAttribute('data-filter');
                const tableId = this.getAttribute('data-table');
                const table = document.getElementById(tableId);
                const rows = table.querySelectorAll('tbody tr');
                
                if (filterValue === 'all') {
                    rows.forEach(row => row.style.display = '');
                    return;
                }
                
                rows.forEach(row => {
                    const cell = row.querySelector(`td[data-${filterType}]`);
                    if (cell && cell.getAttribute(`data-${filterType}`) === filterValue) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });
        
        // Update status functionality
        const statusSelects = document.querySelectorAll('.status-select');
        statusSelects.forEach(select => {
            select.addEventListener('change', function() {
                const newStatus = this.value;
                const rowId = this.closest('tr').getAttribute('id');
                
                // Here you would typically update the status in your database
                // For this demo, we'll just update the status badge
                const statusBadge = this.closest('tr').querySelector('.status-badge');
                statusBadge.textContent = newStatus;
                
                // Update the status badge class
                statusBadge.className = 'status-badge';
                if (newStatus === 'New') {
                    statusBadge.classList.add('status-new');
                } else if (newStatus === 'In Progress') {
                    statusBadge.classList.add('status-progress');
                } else if (newStatus === 'Follow-up') {
                    statusBadge.classList.add('status-followup');
                } else if (newStatus === 'Closed-Won') {
                    statusBadge.classList.add('status-won');
                } else if (newStatus === 'Closed-Lost') {
                    statusBadge.classList.add('status-lost');
                }
                
                // You can add an AJAX call here to save the new status to the server
            });
        });
        
        // Date range picker initialization (if implemented)
        // This would typically use a library like flatpickr or daterangepicker
        
        // Export data functionality
        const exportButtons = document.querySelectorAll('.export-btn');
        exportButtons.forEach(button => {
            button.addEventListener('click', function() {
                const tableId = this.getAttribute('data-table');
                const table = document.getElementById(tableId);
                
                // Simple CSV export (for demo purposes)
                let csv = [];
                const rows = table.querySelectorAll('tr');
                
                rows.forEach(row => {
                    const rowData = [];
                    const cols = row.querySelectorAll('th, td');
                    cols.forEach(col => {
                        // Replace any commas in the cell text to avoid CSV issues
                        rowData.push('"' + col.textContent.replace(/"/g, '""') + '"');
                    });
                    csv.push(rowData.join(','));
                });
                
                const csvString = csv.join('\n');
                const filename = tableId + '_export_' + new Date().toISOString().slice(0, 10) + '.csv';
                
                // Create download link and click it
                const downloadLink = document.createElement('a');
                downloadLink.href = 'data:text/csv;charset=utf-8,' + encodeURIComponent(csvString);
                downloadLink.download = filename;
                
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
            });
        });
        document.addEventListener("DOMContentLoaded", function() {
        document.querySelector("a[href='#logout']").addEventListener("click", function(event) {
            event.preventDefault(); // Prevent default anchor behavior
            window.location.href = "index.html"; // Redirect to login page
        });
    });

    </script>
    <!-- Customer Details Modal -->
<div id="detailsModal" class="modal">
  <div class="modal-content">
    <span class="close-button" onclick="closeModal()">&times;</span>
    <h2>Customer Details</h2>
    <p><strong>Name:</strong> <span id="custName"></span></p>
    <p><strong>Customer ID:</strong> <span id="custId"></span></p>
    <p><strong>Email:</strong> <span id="custEmail"></span></p>
    <p><strong>Phone:</strong> <span id="custPhone"></span></p>
    <p><strong>Model:</strong> <span id="custModel"></span></p>
    <p><strong>Variant:</strong> <span id="custVariant"></span></p>
    <p><strong>Color:</strong> <span id="custColor"></span></p>

    <div class="action-icons">
      <a id="mailLink" href="#" title="Send Email"><i class="fas fa-envelope"></i></a>
      <a id="callLink" href="#" title="Call"><i class="fas fa-phone"></i></a>
      <a id="msgLink" href="#" title="Message"><i class="fas fa-comment-dots"></i></a>
    </div>
  </div>
</div>
<script>
// Example static data â€“ replace with dynamic logic if needed
const customerDetails = {
    "1": { name: "John Smith", id: "C2022010001", email: "john@example.com", phone: "+1 234-567-8901", model: "Sportage", variant: "GTX", color: "White" },
    "2": { name: "Emma Johnson", id: "C2022010002", email: "emma@example.com", phone: "+1 234-567-8902", model: "Sorento", variant: "EX", color: "Black" },
    "3": { name: "Michael Brown", id: "C2022010003", email: "michael@example.com", phone: "+1 234-567-8903", model: "Telluride", variant: "LX", color: "Red" },
    // Add more as needed
};

document.querySelectorAll(".status-update-btn").forEach(btn => {
    btn.addEventListener("click", () => {
        const id = btn.dataset.id;
        const data = customerDetails[id];
        if (data) {
            document.getElementById("custName").textContent = data.name;
            document.getElementById("custId").textContent = data.id;
            document.getElementById("custEmail").textContent = data.email;
            document.getElementById("custPhone").textContent = data.phone;
            document.getElementById("custModel").textContent = data.model;
            document.getElementById("custVariant").textContent = data.variant;
            document.getElementById("custColor").textContent = data.color;

            document.getElementById("mailLink").href = `mailto:${data.email}`;
            document.getElementById("callLink").href = `tel:${data.phone}`;
            document.getElementById("msgLink").href = `sms:${data.phone}`;

            document.getElementById("detailsModal").style.display = "block";
        }
    });
});

function closeModal() {
    document.getElementById("detailsModal").style.display = "none";
}

window.onclick = function(event) {
    if (event.target === document.getElementById("detailsModal")) {
        closeModal();
    }
};
 // Team Performance Data with totals
        const teamData = [
            {
                teamLeader: 'CHETHAN',
                teamNumber: 'Team 1',
                members: [
                    { name: 'Shilpa', enquiryTGT: 35, enquiryACH: 3, enquiryPercentage: 9, td: 2, tdPercentage: 67, bookingTGT: 6, bookingACH: 0, bookingPercentage: 0, retailsTGT: 4, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 50,brPercentage: 0 },
                    { name: 'Prathap', enquiryTGT: 50, enquiryACH: 9, enquiryPercentage: 18, td: 8, tdPercentage: 89, bookingTGT: 6, bookingACH: 1, bookingPercentage: 17, retailsTGT: 5, retailsACH: 1, retailsPercentage: 20, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 38, brPercentage: 100 },
                    { name: 'Dhanush E', enquiryTGT: 40, enquiryACH: 0, enquiryPercentage: 0, td: 0, tdPercentage: 0, bookingTGT: 6, bookingACH: 0, bookingPercentage: 0, retailsTGT: 4, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 0, brPercentage: 0 },
                    { name: 'Darshan', enquiryTGT: 40, enquiryACH: 4, enquiryPercentage: 10, td: 4, tdPercentage: 100, bookingTGT: 6, bookingACH: 2, bookingPercentage: 33, retailsTGT: 4, retailsACH: 2, retailsPercentage: 50, financeACH: 1, financePercentage: 25, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 50, brPercentage: 100 },
                    { name: 'Kavya', enquiryTGT: 30, enquiryACH: 3, enquiryPercentage: 10, td: 2, tdPercentage: 67, bookingTGT: 5, bookingACH: 0, bookingPercentage: 0, retailsTGT: 3, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 33, brPercentage: 0 },
                    { name: 'Mohana', enquiryTGT: 20, enquiryACH: 1, enquiryPercentage: 5, td: 1, tdPercentage: 100, bookingTGT: 1, bookingACH: 0, bookingPercentage: 0, retailsTGT: 1, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 100, brPercentage: 0 },
                    { name: 'Yashwanth', enquiryTGT: 45, enquiryACH: 4, enquiryPercentage: 9, td: 3, tdPercentage: 75, bookingTGT: 6, bookingACH: 1, bookingPercentage: 17, retailsTGT: 4, retailsACH: 1, retailsPercentage: 25, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 67,brPercentage: 100 }
                ],
                totals: { enquiryTGT: 260, enquiryACH: 24, enquiryPercentage: 9, td: 20, tdPercentage: 83, bookingTGT: 36, bookingACH: 4, bookingPercentage: 10, retailsTGT: 25, retailsACH: 4, retailsPercentage: 16, financeACH: 1, financePercentage: 4, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 50,brPercentage: 100 }
            },
            {
                teamLeader: 'MANJUNATH',
                teamNumber: 'Team 2',
                members: [
                    { name: 'Mallikarjun', enquiryTGT: 35, enquiryACH: 1, enquiryPercentage: 3, td: 1, tdPercentage: 100, bookingTGT: 5, bookingACH: 0, bookingPercentage: 0, retailsTGT: 3, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 100, brPercentage: 0 },
                    { name: 'Srikanth D', enquiryTGT: 40, enquiryACH: 5, enquiryPercentage: 13, td: 3, tdPercentage: 60, bookingTGT: 6, bookingACH: 0, bookingPercentage: 0, retailsTGT: 4, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 40,brPercentage: 0 },
                    { name: 'Srikanth BS', enquiryTGT: 45, enquiryACH: 5, enquiryPercentage: 11, td: 3, tdPercentage: 60, bookingTGT: 6, bookingACH: 2, bookingPercentage: 33, retailsTGT: 4, retailsACH: 2, retailsPercentage: 50, financeACH: 1, financePercentage: 25, insuranceACH: 1, insurancePercentage: 25, ebPercentage: 40, brPercentage: 100 },
                    { name: 'Chinamay', enquiryTGT: 20, enquiryACH: 0, enquiryPercentage: 0, td: 0, tdPercentage: 0, bookingTGT: 1, bookingACH: 0, bookingPercentage: 0, retailsTGT: 1, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 0,brPercentage: 0 },
                    { name: 'Divya', enquiryTGT: 45, enquiryACH: 4, enquiryPercentage: 9, td: 3, tdPercentage: 75, bookingTGT: 6, bookingACH: 0, bookingPercentage: 0, retailsTGT: 4, retailsACH: 0, retailsPercentage: 0, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 50, brPercentage: 0 },
                    { name: 'Dhanush(new)', enquiryTGT: 30, enquiryACH: 3, enquiryPercentage: 10, td: 2, tdPercentage: 67, bookingTGT: 4, bookingACH: 1, bookingPercentage: 25, retailsTGT: 3, retailsACH: 1, retailsPercentage: 33, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0,ebPercentage: 33,brPercentage: 100 },
                    { name: 'Rudresh', enquiryTGT: 35, enquiryACH: 7, enquiryPercentage: 20, td: 3, tdPercentage: 43, bookingTGT: 6, bookingACH: 1, bookingPercentage: 17, retailsTGT: 4, retailsACH: 1, retailsPercentage: 25, financeACH: 0, financePercentage: 0, insuranceACH: 0, insurancePercentage: 0, ebPercentage: 29, brPercentage: 100 }
                ],
                totals: { enquiryTGT: 215, enquiryACH: 24, enquiryPercentage: 9, td: 14, tdPercentage: 58, bookingTGT: 29, bookingACH: 4, bookingPercentage: 13, retailsTGT: 23, retailsACH: 4, retailsPercentage: 17, financeACH: 1, financePercentage: 4, insuranceACH: 1, insurancePercentage: 4, ebPercentage: 42, brPercentage: 100 }
            }
        ];

        // DOM Elements
        const dropdownBtn = document.getElementById('dropdownBtn');
        const teamMembersTableContainer = document.getElementById('teamMembersTableContainer');
        const exportBtn = document.getElementById('exportBtn');

        // Get background color class based on percentage
        function getPercentageColor(percentage) {
            if (percentage === 0) return 'red-bg';
            if (percentage <= 20) return 'yellow-bg';
            return 'green-bg';
        }

        // Select Team
        function selectTeam(teamNumber) {
            // Update dropdown button text
            dropdownBtn.textContent = teamNumber;
            
            // Find team data
            const selectedTeam = teamData.find(team => team.teamNumber === teamNumber);
            
            if (selectedTeam) {
                displayTeamMembers(selectedTeam);
            }
        }

        // Display Team Members
        function displayTeamMembers(selectedTeam) {
            // Create table
            const table = document.createElement('table');
            table.classList.add('performance-table');

            // Create header rows
            const headerRow1 = table.insertRow();
            const headerRow2 = table.insertRow();

            // Row 1 - Section headers
            const teamLeaderHeader = document.createElement('th');
            teamLeaderHeader.textContent = 'TEAM LEADERS';
            teamLeaderHeader.rowSpan = 2;
            teamLeaderHeader.classList.add('team-name-cell');
            headerRow1.appendChild(teamLeaderHeader);

            const kecHeader = document.createElement('th');
            kecHeader.textContent = "KEC'S";
            kecHeader.rowSpan = 2;
            headerRow1.appendChild(kecHeader);

            const enquiryHeader = document.createElement('th');
            enquiryHeader.textContent = 'ENQUIRY';
            enquiryHeader.colSpan = 3;
            headerRow1.appendChild(enquiryHeader);

            const tdHeader = document.createElement('th');
            tdHeader.textContent = 'TD';
            tdHeader.rowSpan = 2;
            headerRow1.appendChild(tdHeader);

            const tdPercentHeader = document.createElement('th');
            tdPercentHeader.textContent = 'TD%';
            tdPercentHeader.rowSpan = 2;
            headerRow1.appendChild(tdPercentHeader);

            const bookingHeader = document.createElement('th');
            bookingHeader.textContent = 'BOOKING';
            bookingHeader.colSpan = 3;
            headerRow1.appendChild(bookingHeader);

            const retailsHeader = document.createElement('th');
            retailsHeader.textContent = 'RETAILS';
            retailsHeader.colSpan = 3;
            headerRow1.appendChild(retailsHeader);

            const financeHeader = document.createElement('th');
            financeHeader.textContent = 'FINANCE';
            financeHeader.colSpan = 2;
            headerRow1.appendChild(financeHeader);

            const insuranceHeader = document.createElement('th');
            insuranceHeader.textContent = 'INSURANCE';
            insuranceHeader.colSpan = 2;
            headerRow1.appendChild(insuranceHeader);

            const ebPercentHeader = document.createElement('th');
            ebPercentHeader.textContent = 'E-B';
            ebPercentHeader.rowSpan = 2;
            headerRow1.appendChild(ebPercentHeader);

            const brPercentHeader = document.createElement('th');
            brPercentHeader.textContent = 'B-R';
            brPercentHeader.rowSpan = 2;
            headerRow1.appendChild(brPercentHeader);

            // Row 2 - Column headers
            const subHeaders = ['TGT', 'ACH', '%', 'TGT', 'ACH', '%', 'TGT', 'ACH', '%', 'ACH', '%', 'ACH', '%'];
            subHeaders.forEach(text => {
                const th = document.createElement('th');
                th.textContent = text;
                headerRow2.appendChild(th);
            });

            // Team members rows
            selectedTeam.members.forEach(member => {
                const row = table.insertRow();
                
                // Team leader cell (only for first member)
                if (member === selectedTeam.members[0]) {
                    const teamLeaderCell = document.createElement('td');
                    teamLeaderCell.textContent = selectedTeam.teamLeader;
                    teamLeaderCell.rowSpan = selectedTeam.members.length + 1; // +1 for total row
                    teamLeaderCell.classList.add('team-leader-cell');
                    row.appendChild(teamLeaderCell);
                }

                row.insertCell().textContent = member.name;
                row.insertCell().textContent = member.enquiryTGT;
                row.insertCell().textContent = member.enquiryACH;
                
                const enquiryPercentCell = row.insertCell();
                enquiryPercentCell.textContent = `${member.enquiryPercentage}%`;
                enquiryPercentCell.classList.add(getPercentageColor(member.enquiryPercentage));
                
                row.insertCell().textContent = member.td;
                
                const tdPercentCell = row.insertCell();
                tdPercentCell.textContent = `${member.tdPercentage}%`;
                tdPercentCell.classList.add(getPercentageColor(member.tdPercentage));
                
                row.insertCell().textContent = member.bookingTGT;
                row.insertCell().textContent = member.bookingACH;
                
                const bookingPercentCell = row.insertCell();
                bookingPercentCell.textContent = `${member.bookingPercentage}%`;
                bookingPercentCell.classList.add(getPercentageColor(member.bookingPercentage));

                // RETAILS columns
                row.insertCell().textContent = member.retailsTGT;
                row.insertCell().textContent = member.retailsACH;
                
                const retailsPercentCell = row.insertCell();
                retailsPercentCell.textContent = `${member.retailsPercentage}%`;
                retailsPercentCell.classList.add(getPercentageColor(member.retailsPercentage));

                // FINANCE columns
                row.insertCell().textContent = member.financeACH;
                
                const financePercentCell = row.insertCell();
                financePercentCell.textContent = `${member.financePercentage}%`;
                financePercentCell.classList.add(getPercentageColor(member.financePercentage));

                // INSURANCE columns
                row.insertCell().textContent = member.insuranceACH;
                
                const insurancePercentCell = row.insertCell();
                insurancePercentCell.textContent = `${member.insurancePercentage}%`;
                insurancePercentCell.classList.add(getPercentageColor(member.insurancePercentage));

                // E-B columns
                const ebPercentCell = row.insertCell();
                ebPercentCell.textContent = `${member.ebPercentage}%`;
                ebPercentCell.classList.add(getPercentageColor(member.ebPercentage));

                // B-R columns
                const brPercentCell = row.insertCell();
                brPercentCell.textContent = `${member.brPercentage}%`;
                brPercentCell.classList.add(getPercentageColor(member.brPercentage));
            });

            // Team total row
            const totalRow = table.insertRow();
            totalRow.classList.add('team-total-row');
            totalRow.insertCell().textContent = 'TEAM TOTAL';
            totalRow.insertCell().textContent = selectedTeam.totals.enquiryTGT;
            totalRow.insertCell().textContent = selectedTeam.totals.enquiryACH;
            totalRow.insertCell().textContent = `${selectedTeam.totals.enquiryPercentage}%`;
            totalRow.insertCell().textContent = selectedTeam.totals.td;
            totalRow.insertCell().textContent = `${selectedTeam.totals.tdPercentage}%`;
            totalRow.insertCell().textContent = selectedTeam.totals.bookingTGT;
            totalRow.insertCell().textContent = selectedTeam.totals.bookingACH;
            totalRow.insertCell().textContent = `${selectedTeam.totals.bookingPercentage}%`;
            totalRow.insertCell().textContent = selectedTeam.totals.retailsTGT;
            totalRow.insertCell().textContent = selectedTeam.totals.retailsACH;
            totalRow.insertCell().textContent = `${selectedTeam.totals.retailsPercentage}%`;
            totalRow.insertCell().textContent = selectedTeam.totals.financeACH;
            totalRow.insertCell().textContent = `${selectedTeam.totals.financePercentage}%`;
            totalRow.insertCell().textContent = selectedTeam.totals.insuranceACH;
            totalRow.insertCell().textContent = `${selectedTeam.totals.insurancePercentage}%`;
            totalRow.insertCell().textContent = `${selectedTeam.totals.ebTDPercentage}%`;
            totalRow.insertCell().textContent = `${selectedTeam.totals.brTDPercentage}%`;

            // Clear previous content and add new table
            teamMembersTableContainer.innerHTML = '';
            teamMembersTableContainer.appendChild(table);
        }

        // Clear Team (show all teams message)
        function clearTeam() {
            dropdownBtn.textContent = 'All Teams';
            teamMembersTableContainer.innerHTML = '<div class="no-team-message">Please select a team from the dropdown to view performance data</div>';
        }

        // Export to Excel
        function exportToExcel() {
            const table = teamMembersTableContainer.querySelector('table');
            if (!table) {
                alert('Please select a team first');
                return;
            }

            // Convert table to worksheet
            const ws = XLSX.utils.table_to_sheet(table);
            
            // Create workbook
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Team Performance');
            
            // Save file
            const teamName = dropdownBtn.textContent.replace(' ', '_').toLowerCase();
            XLSX.writeFile(wb, `${teamName}_performance.xlsx`);
        }

        // Initialize
        exportBtn.addEventListener('click', exportToExcel);
        // ...existing code...

        // Suggested values for each field
        const suggestions = {
            salesTarget: 5,
            revenueTarget: 500000,
            accessoriesTarget: 30000,
            enquiriesTarget: 35,
            conversionTarget: 10
        };

        // Apply suggested value when clicked
        function applySuggestion(fieldId, value) {
            const input = document.getElementById(fieldId);
            if (input) {
                input.value = value;
                input.focus();
            }
        }

        // Load current targets into the form
        document.getElementById('loadCurrentBtn').addEventListener('click', function() {
            Object.keys(suggestions).forEach(key => {
                const input = document.getElementById(key);
                if (input) {
                    input.value = suggestions[key];
                }
            });
            alert('Current targets loaded successfully!');
        });
</script>
</body>
</html>
